{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/rafsan/Documents/GitHub/practice_cell/blog/src/screens/HomeScreen.js\";\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } it = o[Symbol.iterator](); return it.next.bind(it); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport React, { useState, useEffect } from 'react';\nimport { StatusBar } from 'expo-status-bar';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport { Header } from 'react-native-elements';\nimport { AuthContext } from \"./../providers/AuthProvider\";\nimport { Ionicons } from '@expo/vector-icons';\nimport PostWrite from \"./../components/PostWrite\";\nimport ShowPost from \"./../components/PostShow\";\nimport { getDataJSON, getAllKeys } from \"../functions/AsyncStorageFunctions\";\n\nvar HomeScreen = function HomeScreen(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      posts = _useState2[0],\n      setPosts = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      reload = _useState4[0],\n      setReload = _useState4[1];\n\n  var getPosts = function getPosts() {\n    var keys, Allposts, _iterator, _step, key, post;\n\n    return _regeneratorRuntime.async(function getPosts$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setReload(true);\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(getAllKeys());\n\n          case 3:\n            keys = _context.sent;\n            Allposts = [];\n\n            if (!(keys != null)) {\n              _context.next = 19;\n              break;\n            }\n\n            _iterator = _createForOfIteratorHelperLoose(keys);\n\n          case 7:\n            if ((_step = _iterator()).done) {\n              _context.next = 16;\n              break;\n            }\n\n            key = _step.value;\n\n            if (!key.startsWith('post')) {\n              _context.next = 14;\n              break;\n            }\n\n            _context.next = 12;\n            return _regeneratorRuntime.awrap(getDataJSON(key));\n\n          case 12:\n            post = _context.sent;\n            Allposts.push(post);\n\n          case 14:\n            _context.next = 7;\n            break;\n\n          case 16:\n            setPosts(Allposts);\n            _context.next = 20;\n            break;\n\n          case 19:\n            console.log(\"no keys\");\n\n          case 20:\n            setReload(false);\n\n          case 21:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  useEffect(function () {\n    getPosts();\n  }, []);\n  return React.createElement(AuthContext.Consumer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }\n  }, function (auth) {\n    return React.createElement(View, {\n      style: styles.container,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 17\n      }\n    }, React.createElement(StatusBar, {\n      style: \"light\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 21\n      }\n    }), React.createElement(Header, {\n      containerStyle: {\n        backgroundColor: '#DAF7A6',\n        justifyContent: 'space-around'\n      },\n      leftComponent: React.createElement(Ionicons, {\n        name: \"md-menu\",\n        size: 25,\n        color: \"white\",\n        onPress: function onPress() {\n          navigation.openDrawer();\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 36\n        }\n      }),\n      centerComponent: {\n        text: 'Home',\n        style: {\n          fontSize: 20,\n          color: '#fff'\n        }\n      },\n      rightComponent: React.createElement(Ionicons, {\n        name: \"md-lock\",\n        size: 25,\n        color: \"white\",\n        onPress: function onPress() {\n          auth.setisLogged(false);\n          auth.setcurrentUser({});\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 37\n        }\n      }),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 21\n      }\n    }), React.createElement(PostWrite, {\n      user: auth.currentUser,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 25\n      }\n    }), React.createElement(FlatList, {\n      data: posts,\n      onRefresh: getPosts,\n      refreshing: reload,\n      renderItem: function renderItem(_ref2) {\n        var item = _ref2.item;\n        return React.createElement(ShowPost, {\n          content: item,\n          currentuser: auth.currentUser,\n          navigation: navigation,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 29\n          }\n        });\n      },\n      keyExtractor: function keyExtractor(item, index) {\n        return index.toString();\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 25\n      }\n    }));\n  });\n};\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: \"center\"\n  }\n});\nexport default HomeScreen;","map":{"version":3,"sources":["/Users/rafsan/Documents/GitHub/practice_cell/blog/src/screens/HomeScreen.js"],"names":["React","useState","useEffect","StatusBar","Header","AuthContext","Ionicons","PostWrite","ShowPost","getDataJSON","getAllKeys","HomeScreen","navigation","posts","setPosts","reload","setReload","getPosts","keys","Allposts","key","startsWith","post","push","console","log","auth","styles","container","backgroundColor","justifyContent","openDrawer","text","style","fontSize","color","setisLogged","setcurrentUser","currentUser","item","index","toString","StyleSheet","create","flex"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react';\nimport { StatusBar } from 'expo-status-bar';\nimport {StyleSheet ,View,FlatList ,Button} from 'react-native';\nimport { Header} from 'react-native-elements';\nimport {AuthContext} from './../providers/AuthProvider';\nimport { Ionicons } from '@expo/vector-icons';\nimport PostWrite from './../components/PostWrite';\nimport ShowPost from './../components/PostShow';\n\n\n\nimport { getDataJSON, getAllKeys} from '../functions/AsyncStorageFunctions';\n\n\nconst  HomeScreen =({navigation})=> {\n    const [posts,setPosts]=useState([]);\n    const [reload,setReload]=useState(false)\n    const getPosts = async ()=>{\n        setReload(true)\n        let keys=await getAllKeys();\n        let Allposts=[];\n        if(keys!=null ){\n            for (let key of keys) {\n                if (key.startsWith('post')) {\n                    let post=await getDataJSON(key);\n                    Allposts.push(post);\n                }\n            }\n            setPosts(Allposts);\n        }\n        else\n            console.log(\"no keys\");\n        setReload(false);\n    }\n\n    useEffect(()=>{\n        getPosts();\n    },[]);\n    \n\n    return(\n        <AuthContext.Consumer>\n            {(auth)=>\n            (\n                <View style={styles.container}>\n                    <StatusBar style=\"light\"/>\n                    <Header\n                    containerStyle={{\n                    backgroundColor: '#DAF7A6',\n                    justifyContent: 'space-around',}}\n                    leftComponent={<Ionicons name=\"md-menu\" size={25} color=\"white\" onPress={()=>{\n                        navigation.openDrawer();\n                    }}/>}\n                    centerComponent={{ text: 'Home', style: { fontSize:20,color: '#fff' } }}\n                    rightComponent={<Ionicons name=\"md-lock\" size={25} color=\"white\" \n                    onPress={()=>{\n                        auth.setisLogged(false);\n                        auth.setcurrentUser({});\n                    }}/>}\n                    />\n                    \n                        <PostWrite user={auth.currentUser} />\n                        <FlatList\n                        data={posts}\n                        onRefresh={getPosts}\n                        refreshing={reload}\n                        renderItem={function ({ item }) {\n                            return (\n                            <ShowPost\n                                content={item}\n                                currentuser={auth.currentUser}\n                                navigation={navigation}\n                            />\n                            );\n                        }}\n                        keyExtractor={(item, index) => index.toString()}\n                        />\n                </View>\n                \n            )}\n        </AuthContext.Consumer>\n    );\n}\n\nconst styles=StyleSheet.create({\n    container:{\n        flex:1,\n        justifyContent: \"center\",\n        \n    },\n});\n\nexport default HomeScreen;"]},"metadata":{},"sourceType":"module"}